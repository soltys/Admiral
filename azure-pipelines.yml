# ASP.NET Core
# Build and test ASP.NET Core projects targeting .NET Core.
# Add steps that run tests, create a NuGet package, deploy, and more:
# https://docs.microsoft.com/azure/devops/pipelines/languages/dotnet-core

trigger:
- master

jobs:
- job: Run_client_tests
  pool:
    vmImage: 'windows-latest'
  steps:
    - task: Npm@1
      displayName: Node install
      inputs:
        command: 'install'

    - task: Npm@1
      displayName: Mocha install
      inputs:    
        command: 'custom'
        customCommand: 'install mocha'

    - task: Npm@1
      displayName: Mocha run tests
      inputs:    
        command: 'custom'
        customCommand: 'test'

- job: Build_application
  pool:
    vmImage: 'windows-latest'
  steps:
    - task: DotNetCoreInstaller@0    
      displayName: Install dotnet version 2.2
      inputs:
        version: '2.2'
    - task: DotNetCoreCLI@2
      displayName: Run "dotnet restore"
      inputs:
        command: 'restore'
        feedsToUse: 'select'




#variables:
#  buildConfiguration: 'Release'

#steps:
#- script: dotnet build --configuration $(buildConfiguration)
#  displayName: 'dotnet build $(buildConfiguration)'
